package net.spell_power.api.statuseffects;

import net.minecraft.entity.effect.StatusEffect;
import net.minecraft.entity.effect.StatusEffectCategory;
import net.spell_power.api.SpellPower;
import net.spell_power.api.SpellSchool;

public class SpellVulnerabilityStatusEffect extends StatusEffect implements VulnerabilityEffect {
    public SpellSchool school = null;
    public SpellPower.Vulnerability vulnerability = SpellPower.Vulnerability.none;

    public SpellVulnerabilityStatusEffect(StatusEffectCategory statusEffectCategory, int color) {
        super(statusEffectCategory, color);
    }

    public SpellVulnerabilityStatusEffect setVulnerability(SpellSchool school, SpellPower.Vulnerability vulnerability) {
        this.school = school;
        this.vulnerability = vulnerability;
        return this;
    }

    @Override
    public SpellPower.Vulnerability getVulnerability(SpellSchool school, int amplifier) {
        if (this.school == null || this.school.equals(school)) {
            return vulnerability.multiply(amplifier + 1);
        }
        return SpellPower.Vulnerability.none;
    }
}
